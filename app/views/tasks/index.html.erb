<h1 class="mb-4">Task List</h1>

<div class="mb-3">
  <%= link_to 'New Task', new_task_path, class: 'btn btn-success' %>
  <%= button_to 'Clear All Tasks', clear_all_tasks_path, method: :delete, data: { confirm: 'Are you sure you want to delete all tasks?' }, class: 'btn btn-outline-danger ms-2' %>
</div>

<% if @tasks.any? %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Description</th>
        <th>Time Start</th>
        <th>Time End</th>
        <th>Completed</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% @tasks.each.with_index(1) do |task, index| %>
        <tr class="<%= task.completed? ? 'completed' : '' %>">
          <td><%= index %></td>
          <td><%= task.name %></td>
          <td><%= task.description %></td>
          <td><%= task.time_start.strftime('%H:%M %p') if task.time_start %></td>
          <td><%= task.time_end.strftime('%H:%M %p') if task.time_end %></td>
          <td><%= task.completed ? 'Yes' : 'No' %></td>
          <td><%= link_to 'Show', task, class: 'btn btn-sm btn-primary' %></td>
          <td><%= link_to 'Edit', edit_task_path(task), class: 'btn btn-sm btn-secondary' %></td>
          <td><%= link_to 'Delete', task, method: :delete, data: { confirm: 'Are you sure you want to delete this task?' }, class: 'btn btn-sm btn-danger' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No tasks found.</p>
<% end %>
